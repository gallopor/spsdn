tosca_definitions_version: tosca_simple_yaml_1_0

description: Spirent Velocity Types 1.0.0

node_types:

  com.spirent.velocity.Topology:
    derived_from: tosca.nodes.Root
    properties:
      name:
        type: string
      description:
        required: false
        type: string
      custom_properties:
        type: list
        required: false
        entry_schema:
          type: com.spirent.velocity.TopologyProperty

  com.spirent.velocity.Resource:
    derived_from: tosca.nodes.Root
    properties:
      id:
        type: string
      type:
        type: string
        required: false
      inventory_id:
        type: string
        required: false
      inventory_name:
        type: string
        required: false
      condition:
        type: string
        required: false
      name:
        type: string
      description:
        type: string
        required: false
      shared:
        type: boolean
        required: false
      skip_validation:
        type: boolean
        required: false
      boundary:
        type: com.spirent.velocity.Boundary
        required: false
      icon_id:
        type: string
        required: false
      icon_uri:
        type: string
        required: false
      connectivity:
        type: string
        default: ANY
        required: false
        constraints:
          - valid_values: [ANY, CONNECTED, DISCONNECTED]
      # custom_properties - used to store unhandled static properties of resource 
      custom_properties:
        type: list
        required: false
        entry_schema:
          type: com.spirent.velocity.ResourceProperty
      property_groups:
        type: list
        required: false
        entry_schema:
          type: com.spirent.velocity.ResourcePropertyGroup
      extensions:
        type: list
        required: false
        entry_schema:
          type: com.spirent.velocity.XmlExtension
      shape:
        type: string
        default: RECTANGLE
        required: false
        constraints:
          - valid_values: [RECTANGLE, CIRCLE, HEXAGON, DIAMOND]
      # Added by jxie 
      reservation_time: 
        type: string
        default: IMMEDIATE
        required: false

  com.spirent.velocity.Device:
    derived_from: com.spirent.velocity.Resource

  com.spirent.velocity.Port:
    derived_from: com.spirent.velocity.Resource
    requirements:
      - device:
          relationship: com.spirent.velocity.relationships.PortOfDevice
          node: com.spirent.velocity.Device

  com.spirent.velocity.PC:
    derived_from: com.spirent.velocity.Device

  com.spirent.velocity.Switch:
    derived_from: com.spirent.velocity.Device

  com.spirent.velocity.Server:
    derived_from: com.spirent.velocity.Device

  com.spirent.velocity.VirtualResource:
    derived_from: com.spirent.velocity.Resource
    properties:
      cloud_object_id:
        type: string

  com.spirent.velocity.VirtualDevice:
    derived_from: com.spirent.velocity.VirtualResource

  com.spirent.velocity.VirtualPort:
    derived_from: com.spirent.velocity.VirtualResource
    requirements:
      - virtual_device:
          relationship: com.spirent.velocity.relationships.VirtualPortOfVirtualDevice
          node: com.spirent.velocity.VirtualDevice

  com.spirent.velocity.VirtualPublicNetwork:
    derived_from: com.spirent.velocity.VirtualResource

  com.spirent.velocity.VirtualNetwork:
    derived_from: com.spirent.velocity.VirtualResource

  com.spirent.velocity.VirtualSubnet:
    derived_from: com.spirent.velocity.VirtualResource

  com.spirent.velocity.VirtualRouter:
    derived_from: com.spirent.velocity.VirtualDevice

  com.spirent.velocity.VirtualMachine:
    derived_from: com.spirent.velocity.VirtualDevice
    properties:
      vm_template_id:
        type: string

  com.spirent.velocity.Link:
    derived_from: tosca.nodes.Root
    properties:
      id:
        type: string
      condition:
        type: string
        required: false
      name:
        type: string
        required: false
      abstract_resource_id:
        type: string
        required: false
      abstract_resource_name:
        type: string
        required: false
      bidirectional:
        type: boolean
        required: false
        default: true
      # Added by jxie
      property_groups:
        type: list
        required: false
        entry_schema:
          type: com.spirent.velocity.LinkPropertyGroup
    requirements:
      - from:
          relationship: com.spirent.velocity.relationships.EndpointOfLink
          node: com.spirent.velocity.Resource
      - to:
          relationship: com.spirent.velocity.relationships.EndpointOfLink
          node: com.spirent.velocity.Resource

  com.spirent.velocity.GeneralLink:
    derived_from: com.spirent.velocity.Link

  com.spirent.velocity.SonetLink:
    derived_from: com.spirent.velocity.Link

  com.spirent.velocity.EthernetLink:
    derived_from: com.spirent.velocity.Link

  com.spirent.velocity.VlanLink:
    derived_from: com.spirent.velocity.Link      

  com.spirent.velocity.VirtualLink:
    derived_from: com.spirent.velocity.Link      

  com.spirent.velocity.InventoryVlan:
    derived_from: com.spirent.velocity.Resource
    properties:
      tagged_vlan_ids:
        type: string
      untagged_vlan_id:
        type: string

  com.spirent.velocity.Vlan:
    derived_from: com.spirent.velocity.Resource
    properties:
      vlan_id:
        type: string
        required: true

  com.spirent.velocity.MultiVlan:
    derived_from: com.spirent.velocity.Resource

  com.spirent.velocity.MultiVlanPort:
    derived_from: com.spirent.velocity.Resource
    properties:
      tagged_vlan_ids:
        type: string
      untagged_vlan_id:
        type: string
    requirements:
      - multi_vlan:
          relationship: com.spirent.velocity.relationships.PortOfMultiVlan
          node: com.spirent.velocity.MultiVlan

  com.spirent.velocity.Note:
    derived_from: tosca.nodes.Root
    properties:
      id:
        type: string
      subject:
        type: string
      content:
        type: string
      boundary:
        type: com.spirent.velocity.Boundary
      color:
        type: string
        constraints:
          - valid_values: [YELLOW, PINK, GREEN]


relationship_types:

  com.spirent.velocity.relationships.EndpointOfLink:
      derived_from: tosca.relationships.Root
      valid_target_types: [ com.spirent.velocity.Link ]

  com.spirent.velocity.relationships.PortOfDevice:
      derived_from: tosca.relationships.Root
      valid_target_types: [ com.spirent.velocity.Port ]

  com.spirent.velocity.relationships.VirtualPortOfVirtualDevice:
      derived_from: tosca.relationships.Root
      valid_target_types: [com.spirent.velocity.VirtualPort]

  com.spirent.velocity.relationships.PortOfMultiVlan:
      derived_from: tosca.relationships.Root
      valid_target_types: [com.spirent.velocity.MultiVlanPort]


data_types:
  com.spirent.velocity.BaseProperty:
    properties:
      name:
        type: string
      value:
        type: string
      vendor:
        type: string
        required: false
      type:
        type: string
        required: false
        constraints:
          - valid_values: [BOOLEAN, TEXT, TEXT_AREA, PASSWORD, INTEGER, DROP_DOWN_LIST, IP_ADDRESS, MAC_ADDRESS, CDIR,
           DROP_DOWN_TOPOLOGY_VIRTUAL_PUBLIC_NETWORK, ATTACHMENT]

  com.spirent.velocity.TopologyProperty:
    derived_from: com.spirent.velocity.BaseProperty

  com.spirent.velocity.ResourceProperty:
    derived_from: com.spirent.velocity.BaseProperty
    properties:
        id:
          type: string
          required: false
        value_label:
          type: string
          required: false
        description:
          type: string
          required: false
        editable:
          type: boolean
          required: false
        cloud_specific:
          type: boolean
          required: false
        important:
          type: boolean
          required: false
        order:
          type: integer
          required: false
        required:
          type: boolean
          required: false
  
  # Added by jxie
  com.spirent.velocity.LinkProperty:
    derived_from: com.spirent.velocity.BaseProperty
    properties:  
      id:
        type:
          string
      value_label:
        type:
          string
      description:
        type:
          string

  com.spirent.velocity.Boundary:
    properties:
      height:
        type: integer
      width:
        type: integer
      x:
        type: integer
      y:
        type: integer

  com.spirent.velocity.ResourcePropertyGroup:
    properties:
      name:
        type:
          string
      order:
        type:
          string
        required: false
      group:
        type: list
        entry_schema:
          type: com.spirent.velocity.ResourceProperty

  # Added by jxie
  com.spirent.velocity.LinkPropertyGroup:
    properties:
      name:
        type:
          string
      order:
        type:
          integer
        required: false
      group:
        type: list
        entry_schema:
          type: com.spirent.velocity.LinkProperty

  com.spirent.velocity.Extension:
    properties:
      type:
        type: string
      content:
        type: string

  com.spirent.velocity.XmlExtension:
    derived_from: com.spirent.velocity.Extension
    properties:
      namespace:
        type: string

group_types:

  com.spirent.velocity.groups.Group:
    derived_from: tosca.groups.Root
    members: [com.spirent.velocity.Note, com.spirent.velocity.Resource, com.spirent.velocity.groups.Group]
    properties:
      id:
        type: string
      boundary:
        type: com.spirent.velocity.Boundary
      name:
        type: string
      description:
        type: string
      collapsed:
        type: boolean
        default: false
      shared:
        type: boolean
        required: false

  com.spirent.velocity.groups.Subtopology:
      derived_from: com.spirent.velocity.groups.Group
      members: [com.spirent.velocity.Note, com.spirent.velocity.Resource, com.spirent.velocity.groups.Group]
      properties:
        topology_id:
          type: string
        revision:
          type: string
        original_revision:
          type: string
        current_revision:
          type: string
        subscription_status:
          type: string
          constraints:
            - valid_values: [UNSUBSCRIBED, SUBSCRIBED]
            
